---
layout: default
---
<script>
var width = 500,
    height = 500,
    n = 8,
    r = 0.4 * width,
    π = Math.PI;

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
    .style("background", "#d1d1d1");

var g = svg.append("g");

var moons = g.selectAll("path")
    .data(d3.range(1, n + 1))
    .enter().append("path")
    .attr("fill", "#000")
    .attr("fill-opacity", 1 / n);

d3.timer(function(t) {
    g.attr("transform", "translate(" + [width / 2, height / 2] + ")rotate(" + t / 200 + ")");

    moons.attr("transform", function(d) {
        return "rotate(" + 360 * d * t / 20000 + ")";
    });

    moons.attr("d", function(d) {
        return moon((π * d * (t / 25000)) % (2 * π));
    });
});

function moon(θ) {
    var rx0 = θ < π ? r : -r,
        s0  = θ < π ? 0 : 1,
        rx1 = r * Math.cos(θ),
        s1  = θ < π/2 || (π <= θ && θ < 3*π/2) ? 0 : 1;

    return "M" + [                  0,  r] +
           "A" + [rx0, r, 0, 0, s0, 0, -r] +
           "A" + [rx1, r, 0, 0, s1, 0,  r];
}
</script>
